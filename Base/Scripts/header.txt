<script>

<!-- Define variables -->

var SpeechRecognition = SpeechRecognition || window.webkitSpeechRecognition
var SpeechRecognitionEvent = SpeechRecognitionEvent || webkitSpeechRecognitionEvent

//var words = [ 'police' , 'fire' , 'ambulance'];

var pageURL = window.location.href;
var folderURL = pageURL.replace(/[^/]*$/, '');

<!-- Setup Speech Recognition -->

var recognition = new SpeechRecognition();
recognition.continuous = false;
recognition.lang = 'en-US';
recognition.interimResults = false;
recognition.maxAlternatives = 1;

<!-- Functions -->

function startRecognition() {	
  recognition.start();
  //alert("Started recognition!");
}


<!-- Callbacks -->

recognition.onresult = function(event) {
  // The SpeechRecognitionEvent results property returns a SpeechRecognitionResultList object
  // The SpeechRecognitionResultList object contains SpeechRecognitionResult objects.
  // It has a getter so it can be accessed like an array
  // The first [0] returns the SpeechRecognitionResult at the last position.
  // Each SpeechRecognitionResult object contains SpeechRecognitionAlternative objects that contain individual results.
  // These also have getters so they can be accessed like arrays.
  // The second [0] returns the SpeechRecognitionAlternative at position 0.
  // We then return the transcript property of the SpeechRecognitionAlternative object
  var result = event.results[0][0].transcript;
  // CONTACT GODOT HERE
  console.log('[header]Result: ' + result);
  console.log('[header]Confidence: ' + event.results[0][0].confidence);
}

recognition.onspeechend = function() {
  recognition.stop();
  // CONTACT GODOT HERE
}

recognition.onnomatch = function(event) {
  // CONTACT GODOT HERE
}

recognition.onerror = function(event) {	
  // CONTACT GODOT HERE
}

</script>
